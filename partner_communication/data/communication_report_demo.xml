<odoo>
    <!-- Report for printing a letter on Compassion Paper -->
    <report id="report_partner_communication"
            model="partner.communication.job"
            string="A4 for Communication"
            report_type="qweb-pdf"
            name="partner_communication.partner_communication_report"
    />
    <record id="report_partner_communication" model="ir.actions.report.xml">
        <field name="paperformat_id" ref="report.paperformat_euro"/>
    </record>

    <template id="partner_communication_report">
        <t t-set="custom_css">
            #header {
                margin-left: 15mm;
                height: 45mm;
                font-size: 8pt;
            }
            #logo {
                display: inline-block;
                margin-top: 6mm;
                width: 100mm;
                height: 40mm;
            }
            #logo img {
                max-width: 100%;
                max-height: 100%;
                margin: auto;
            }
            #square {
                display: inline-block;
                float: right;
                margin-top: 6mm;
                margin-right: 6mm;
                width: 19mm;
                height: 19mm;
            }
            #square img {
                max-width: 100%;
                max-height: 100%;
                margin: auto;
            }
            #compassion_address {
                margin-left: 7mm;
            }
            #letter {
                font-size: 10pt;
                margin-left: 20mm;
                margin-right: 20mm;
                margin-bottom: 20mm;
            }
            .right {
                width: 44%;
                margin-left: auto;
            }
            .blue {
                color: blue;
                font-weight: bold;
            }
            #pp {
                font-family: verdana;
            }
            #pp-box {
                display: inline-block;
                padding: 1mm;
                width: 50mm;
                line-height: initial;
                border-style: solid;
                border-width: 1pt;
            }
            #pp-box div:first-child{
                font-size: 12pt;
                font-weight: bold;
            }
                #pp-box div:last-child{
                font-size: 8pt;
            }
            #pp-post {
                display: inline-block;
                font-size: 6pt;
            }
            #pp hr {
                margin-top: 0.5mm;
                margin-bottom: 3mm;
            }
            #date {
                margin-top: 3mm;
            }
            #content {
                margin-top: 5mm;
                width: 100%;
            }
            #body {
                display: inline-block;
            }
            .body_text {
                display: inline-block;
                min-height: 145mm;
            }
            hr {
                margin-top: 0px;
                border: none;
                height: 1pt;
                background-color: black;
            }
            /* Format lists for PDF */
            ul {
                list-style: none;
            }
            li {
                padding-left: 16px;
            }
            li:before {
                content: "-";
                padding-right: 8px;
            }
        </t>
        <t t-call="partner_communication.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="partner_communication.partner_communication_document" t-lang="o.partner_id.lang"/>
            </t>
        </t>
    </template>

    <template id="partner_communication_document">
        <!--<t t-set="o" t-value="o.with_context({'lang':o.partner_id.lang})" />-->
        <div class="page">
            <div id="header">
                <div id="compassion_address">
                    <span class="blue">COMPASSION</span>
                    <span>, Rue Galil√©e 3, 1400 Yverdon-les-Bains</span>
                    <br/>
                    <span class="blue">TEL</span>
                    <span>.: 0800 784 773</span>
                    <br/>
                    <span class="blue">MAIL</span>
                    <span>: info@compassion.ch</span>
                    <br/>
                    <span class="blue">WWW</span>
                    <span>.compassion.ch</span>
                    <br/>
                    <span class="blue">CCP/PC</span>
                    <span> 17-312562-0</span>
                </div>
            </div>
            <div id="letter">
                <div id="address" class="right">
                    <div id="pp">
                        <div id="pp-box">
                            <div>P.P.</div>
                            <div>CH-1400 Yverdon-les-Bains</div>
                        </div>
                        <div id="pp-post">
                            <p>Poste CH SA</p>
                        </div>
                        <hr/>
                    </div>
                    <span t-field="o.partner_id.contact_address"/>
                </div>
                <div id="date" class="right">
                    <span t-field="o.date"/>
                </div>

                <div id="title">
                    <b><span t-field="o.subject"/></b>
                    <hr/>
                </div>

                <div id="content">
                    <div id="body">
                        <span t-field="o.body_html" class="body_text"/>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="layout" inherit_id="report.layout" primary="True">
        <!-- Add report style -->
        <xpath expr="//head" position="inside">
            <style type="text/css">
                /* Allow custom style for each report */
                <t t-raw="custom_css"/>
            </style>
        </xpath>
    </template>

    <!-- Default container -->
    <template id="html_container">
        <t t-set="body_classname" t-value="'container'"/>
        <t t-call="partner_communication.layout">
            <t t-raw="0"/>
        </t>
    </template>

    <record id="default_communication" model="partner.communication.config">
        <field name="name">Default communication</field>
        <field name="model_id" ref="model_res_partner"/>
        <field name="send_mode">partner_preference</field>
        <field name="send_mode_pref_field">global_communication_delivery_preference</field>
    </record>
</odoo>
