<openerp>
    <data>
        <template id="layout" inherit_id="report.layout" primary="True">
            <!-- Add report style -->
            <xpath expr="//head" position="inside">
                <style type="text/css">
                    /* Remove padding of reports to allow precise positionning */
                    .container {
                        padding: 0mm;
                    }
                    #background {
                        position: absolute;
                        left: 0;
                        top: 0;
                        width: 210mm;
                        height: 297mm;
                    }
                    #background img {
                        max-width: 100%;
                        max-height: 100%;
                        margin: auto;
                    }
                    #body {
                        position: absolute;
                    }
                </style>
            </xpath>
        </template>

        <report id="report_s2b_letter"
                model="correspondence.s2b.generator"
                string="S2B Letter"
                report_type="qweb-pdf"
                name="sbc_compassion.s2b_letter"
                menu="False"
        />

        <template id="s2b_letter">
            <t t-call="sbc_compassion.layout">
                <t t-foreach="docs" t-as="o">
                    <div class="page">
                        <span t-field="o.background" t-field-options='{"widget": "image"}' id="background"/>
                        <t t-set="l" t-value="o.s2b_template_id"/>
                        <span t-raw="o.body_html" id="body"
                              t-attf-style="left: {{ l.text_box_left_position }}mm; top: {{ l.text_box_top_position }}mm; width: {{ l.text_box_width }}mm; height: {{ l.text_box_height }}mm;"
                        />
                    </div>
                    <div class="page"/>
                </t>
            </t>
        </template>
    </data>

    <data noupdate="1">
        <record id="report_s2b_letter" model="ir.actions.report.xml">
            <field name="paperformat_id" ref="report.paperformat_euro"/>
        </record>
    </data>
</openerp>
